<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VeriPay</title>

  <link rel="stylesheet" href="css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">


  <!-- Font Awesome -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.7/js/all.js"></script>

</head>

<body>


  <section class="colored-section" id="title">

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">

      <a class="navbar-brand" href="">VeriPay</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo02">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarTogglerDemo02">

        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#footer">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#staticBackdrop" data-bs-toggle="modal" data-bs-target="#signIn">Sign In</a>
          </li>
          <li class="nav-item">
            <button class="btn btn-primary" type="button" style="font-family: Montserrat;" data-bs-toggle="modal" data-bs-target="#signUp">Sign Up</button>
          </li>

        </ul>

      </div>
    </nav>
    <div class="container-fluid">
      <!-- Title section -->
      <div class="row">

        <div class="col-lg-6 offset-lg-1">
          <h1 class="big-heading">Verification of <br>Payments <br />made easy.</h1>
          <button type="button" class="btn btn-primary btn-lg download-button" data-bs-toggle="modal" data-bs-target="#signUp"> Sign Up</button>
          <button type="button" class="btn btn-secondary btn-lg download-button" data-bs-toggle="modal" data-bs-target="#signIn"> Sign In</button>

        </div>

        <div class="col-lg-5">
          <img class="title-image" src="images/iphoneui.png" alt="iphone-mockup">
        </div>

      </div>
    </div>
  </section>


  <!-- Sign In Modal -->
  <div class="modal fade" id="signIn" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Sign In</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="modal-login-content">
            <form id="signinForm">

              <div class="container">
                <label for="uname"><b>Username</b></label>
                <input type="text" class="form-control" placeholder="Enter Your Username" name="uname" required>

                <label for="psw"><b>Password</b></label>
                <input type="password" class="form-control" placeholder="Enter Your Password" name="psw" required>
                <div class="row row-content justify-content-center">
                  <button id="signinBtn" type="submit" class="col-6 login-btn">Login</button>
                  <p class="row justify-content-center" style="color:red;">Dont have an account? Sign up.</p>
                </div>
              </div>
              <div id="alert1" class="alert"></div>
            </form>


          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signUp">Sign Up</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Sign Up Modal -->
  <div class="modal fade" id="signUp" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Create Your Account</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="modal-login-content">
            <form id="signupForm">
              <div class="container">
                <label for="fname"><b>First Name</b></label>
                <input type="text" class="form-control" placeholder="First Name" name="fname" required>

                <label for="lname"><b>Last Name</b></label>
                <input type="text" class="form-control" placeholder="Last Name" name="lname" required>

                <label for="minc"><b>Monthly Income</b></label>
                <input type="number" class="form-control" placeholder="INR" name="minc" required>

                <label for="phoneno"><b>Phone No.</b></label>
                <input type="tel" class="form-control" placeholder="Mobile Number" name="phoneno" required>

                <label for="uname"><b>Username</b></label>
                <input type="text" class="form-control" placeholder="Set Your Username" name="uname" required>

                <label for="Email"><b>Email address</b></label>
                <input type="email" class="form-control" placeholder="Your Email" name="email" style="padding: 10px; margin: 7px 0px;" required>

                <label for="psw"><b>Password</b></label>
                <input type="password" class="form-control" placeholder="Create Password" name="psw" required>

                <label for="psw"><b>Confirm Password</b></label>
                <input type="password" class="form-control" placeholder="Confirm Password" name="confirmpsw" required>

                <div class="row row-content justify-content-center">
                  <button id="signupBtn" type="submit" class="col-6 login-btn">Sign Up</button>
                </div>
                <div id="alert2" class="alert"></div>
              </div>
            </form>


          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signIn">Sign In</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

  <!--Sign Up Script-->
  <script>
    $(document).ready(function(){
      $("#signupBtn").on('click', function(){
        var alert = document.getElementById("alert2");
        const form = $("#signupForm")[0];
        fetch("signup.php", {
        method : "POST",
        body: new FormData(form)
        })
        .then(response=>response.json())
        .then(json =>
        {
          console.log(json[0], json[1]);
            if(json[0] == 1){
              alert.classList.add("alert-success");
              alert.innerHTML = "<center><b>Registration successful.<b><center>";
            }
            else{
              if(json[1]==1){
                alert.classList.add("alert-danger");
                alert.innerHTML = "<center><b>Confirm Password Doesn't Match Password.<b><center>";
              }
              else if(json[1]==2){
                alert.classList.add("alert-danger");
                alert.innerHTML = "<center><b>Password Should Be Of 8 Characters Atleast.<b><center>";
              }
              else if(json[1]==3){
                alert.classList.add("alert-warning");
                alert.innerHTML = "<center><b>Username Already Taken. Try Another Username.<b><center>";
              }
              else{
                alert.classList.add("alert-warning");
                alert.innerHTML = "<center><b>Email Already In Use. Try Again.<b><center>";
              }
            }
        });
        return false;
      });
    });
  </script>

  <!--Sign In Script-->
  <script>
    function pageRedirect() {
      window.location.replace("dashboard.php");
    }
    $(document).ready(function(){
      $("#signinBtn").on('click', function(){
        var alert = document.getElementById("alert1");
        const form = $("#signinForm")[0];
        fetch("signin.php", {
        method : "POST",
        body: new FormData(form)
        })
        .then(response=>response.json())
        .then(json =>
        {
          console.log(json[0]);
            if(json[0] == 1){
              alert.classList.add("alert-success");
              alert.innerHTML = "<center><b>Signed In successfully.<b><center>";     
              setTimeout("pageRedirect()", 2000);
            }
            else{
              if(json[1]==1){
                alert.classList.add("alert-danger");
                alert.innerHTML = "<center><b>Wrong Password.<b><center>";
              }
              else{
                alert.classList.add("alert-warning");
                alert.innerHTML = "<center><b>Not Signed Up Yet. <a class=\"alert-link\" href=\"sign-up.html\">Sign Up<a><b><center>";
              }
            }
        });
        return false;
      });
    });
  </script>

  <!-- Desktop notification -->
  <script>
    function showNotification() {
   const notification = new Notification("New message incoming", {
      body: "Hi there. Welcome to VeriPay!",
      
   })
}
    console.log(Notification.permission);
    if (Notification.permission === "granted") {
       showNotification();
    } else if (Notification.permission !== "denied") {
       Notification.requestPermission().then(permission => {
          if(permission==="granted"){
            showNotification();
          }
       });
    }
    
 </script>

</body>

</html>
